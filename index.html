<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>Mini School Tools - Ø¹Ù„ÛŒ Ø³Ø§Ù…</title>
<style>
  body { font-family: Arial, sans-serif; text-align:center; background:#e8f0fe; }
  .card { background:white; padding:20px; margin:15px auto; border-radius:12px; width:320px; box-shadow:0 4px 8px rgba(0,0,0,0.1);}
  button { margin:5px 0; padding:10px 20px; border:none; border-radius:8px; cursor:pointer; width:90%; }
  button:hover { background:#0077ff; color:white; }
  input, textarea { margin:5px 0; padding:8px; width:90%; border-radius:6px; border:1px solid #aaa; }
  #timerDisplay, #finalRes, #randomRes, #avgRes { font-weight:bold; margin-top:10px; color:red; }
  #splash { position:fixed; top:0; left:0; width:100%; height:100%; background:#1a73e8; color:white; display:flex; justify-content:center; align-items:center; font-size:24px; flex-direction:column; }
</style>
</head>
<body>

<div id="splash">
  âœ¨ Ø³Ø§Ø®ØªÙ‡ Ø¹Ù„ÛŒ Ø³Ø§Ù… Ù…Ø±Ø¯ÛŒ âœ¨
</div>

<h2>ğŸ“ Mini School Tools</h2>

<!-- Ø­Ø³Ø§Ø¨Ú¯Ø± Ù†Ù…Ø±Ù‡ -->
<div class="card">
  <h3>ğŸ“Š Ø­Ø³Ø§Ø¨Ú¯Ø± Ù†Ù…Ø±Ù‡ Ù†Ù‡Ø§ÛŒÛŒ</h3>
  <input id="takalif" type="number" placeholder="ØªÚ©Ø§Ù„ÛŒÙ">
  <input id="quiz" type="number" placeholder="Ú©ÙˆÛŒÛŒØ²">
  <input id="exam" type="number" placeholder="Ø§Ù…ØªØ­Ø§Ù†">
  <button onclick="calcFinal()">Ù…Ø­Ø§Ø³Ø¨Ù‡</button>
  <div id="finalRes"></div>
</div>

<!-- ØªØ§ÛŒÙ…Ø± -->
<div class="card">
  <h3>â±ï¸ ØªØ§ÛŒÙ…Ø± Ø§Ù…ØªØ­Ø§Ù†</h3>
  <input id="minutes" type="number" placeholder="Ø¯Ù‚ÛŒÙ‚Ù‡">
  <button onclick="startTimer()">Ø´Ø±ÙˆØ¹</button>
  <div id="timerDisplay"></div>
</div>

<!-- Ø§Ù†ØªØ®Ø§Ø¨ Ø±Ù†Ø¯ÙˆÙ… -->
<div class="card">
  <h3>ğŸ² Ø§Ù†ØªØ®Ø§Ø¨ Ø±Ù†Ø¯ÙˆÙ… Ù‡Ù…Ú©Ù„Ø§Ø³ÛŒ</h3>
  <input id="names" type="text" placeholder="Ø§Ø³Ø§Ù…ÛŒ Ø¨Ø§ ,">
  <button onclick="pickRandom()">Ø§Ù†ØªØ®Ø§Ø¨</button>
  <div id="randomRes"></div>
</div>

<!-- Ù…Ø¹Ø¯Ù„ Ú¯ÛŒØ± Ø¨Ø¯ÙˆÙ† ÙˆØ§Ø­Ø¯ -->
<div class="card">
  <h3>ğŸ§® Ù…Ø¹Ø¯Ù„â€ŒÚ¯ÛŒØ± Ø³Ø±ÛŒØ¹</h3>
  <textarea id="grades" placeholder="Ù†Ù…Ø±Ù‡â€ŒÙ‡Ø§ Ø±Ùˆ Ø¨Ø§ Ú©Ø§Ù…Ø§ Ø¨Ù†ÙˆÛŒØ³"></textarea>
  <button onclick="calcAvg()">Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…Ø¹Ø¯Ù„</button>
  <div id="avgRes"></div>
</div>

<p>ğŸš€ Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡ Ø¨Ø§ â¤ï¸ ØªÙˆØ³Ø· Ø¹Ù„ÛŒ Ø³Ø§Ù…</p>

<script>
// Splash screen
setTimeout(()=>document.getElementById('splash').style.display='none', 2500);

// Ø­Ø³Ø§Ø¨Ú¯Ø± Ù†Ù…Ø±Ù‡
function calcFinal(){
  let t = parseFloat(document.getElementById("takalif").value)||0;
  let q = parseFloat(document.getElementById("quiz").value)||0;
  let e = parseFloat(document.getElementById("exam").value)||0;
  let final = t*0.2 + q*0.3 + e*0.5;
  document.getElementById("finalRes").innerText = final>=10?`ğŸ‰ Ù¾Ø§Ø³ Ø´Ø¯ÛŒ! Ù†Ù…Ø±Ù‡ Ù†Ù‡Ø§ÛŒÛŒ: ${final.toFixed(2)}`:`ğŸ˜¢ Ø§ÙØªØ§Ø¯ÛŒ! Ù†Ù…Ø±Ù‡ Ù†Ù‡Ø§ÛŒÛŒ: ${final.toFixed(2)}`;
}

// ØªØ§ÛŒÙ…Ø±
let timerInterval;
function startTimer(){
  clearInterval(timerInterval);
  let total = parseInt(document.getElementById("minutes").value)*60;
  if(isNaN(total)||total<=0)return;
  let display = document.getElementById("timerDisplay");
  timerInterval=setInterval(()=>{
    let m=Math.floor(total/60), s=total%60;
    display.innerText=`â³ ${m}:${s}`;
    if(--total<0){
      clearInterval(timerInterval);
      display.innerText="ğŸš¨ ÙˆÙ‚Øª ØªÙ…ÙˆÙ… Ø´Ø¯!";
      alert("â° Ø²Ù…Ø§Ù†â€ŒØ³Ù†Ø¬ ØªÙ…Ø§Ù… Ø´Ø¯!");
    }
  },1000);
}

// Ø§Ù†ØªØ®Ø§Ø¨ Ø±Ù†Ø¯ÙˆÙ… Ø¨Ø§ Ø°Ø®ÛŒØ±Ù‡ localStorage
function pickRandom(){
  let saved = localStorage.getItem("students");
  let useSaved=false;
  if(saved){
    useSaved=confirm("Ù…ÛŒØ®ÙˆØ§ÛŒØ¯ Ø§Ø² Ø§Ø³Ø§Ù…ÛŒ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯ØŸ");
  }
  let students=[];
  if(useSaved){
    students = saved.split(",").map(s=>s.trim()).filter(s=>s);
  }else{
    let input = document.getElementById("names").value;
    if(input) students = input.split(",").map(s=>s.trim()).filter(s=>s);
    if(students.length>0 && confirm("Ù…ÛŒØ®ÙˆØ§ÛŒØ¯ Ø°Ø®ÛŒØ±Ù‡ Ø¨Ø´Ù‡ Ø¨Ø±Ø§ÛŒ Ø¯ÙØ¹Ø§Øª Ø¨Ø¹Ø¯ØŸ")){
      localStorage.setItem("students", students.join(","));
    }
  }
  if(students.length>0){
    let choice = students[Math.floor(Math.random()*students.length)];
    document.getElementById("randomRes").innerText="â¡ï¸ Ø§Ù…Ø±ÙˆØ² Ù‚Ø±Ø¹Ù‡ Ø§ÙØªØ§Ø¯ Ø¨Ù‡: "+choice+" ğŸ˜…";
  }else{
    document.getElementById("randomRes").innerText="Ù‡ÛŒÚ† Ø§Ø³Ù…ÛŒ ÙˆØ§Ø±Ø¯ Ù†Ø´Ø¯Ù‡!";
  }
}

// Ù…Ø¹Ø¯Ù„ Ú¯ÛŒØ± Ø¨Ø¯ÙˆÙ† ÙˆØ§Ø­Ø¯
function calcAvg(){
  let grades=document.getElementById("grades").value.split(",").map(x=>parseFloat(x)||0);
  if(grades.length==0){
    document.getElementById("avgRes").innerText="Ù„Ø·ÙØ§Ù‹ Ù†Ù…Ø±Ù‡â€ŒÙ‡Ø§ Ø±Ùˆ ÙˆØ§Ø±Ø¯ Ú©Ù†!";
    return;
  }
  let total=grades.reduce((a,b)=>a+b,0);
  let avg = total/grades.length;
  document.getElementById("avgRes").innerText="â¡ï¸ Ù…Ø¹Ø¯Ù„ Ø´Ù…Ø§: "+avg.toFixed(2);
}
</script>
</body>
</html>
